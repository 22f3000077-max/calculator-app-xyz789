<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator</title>
    <!-- Bootstrap CSS CDN for a clean and responsive base -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5; /* Light gray background for a modern look */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .calculator {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 320px; /* Fixed width for a compact, user-friendly size */
            max-width: 90%; /* Responsive adjustment for smaller screens */
        }
        .display {
            background-color: #222;
            color: #fff;
            font-size: 2.5em;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: right;
            overflow: hidden; /* Prevents long numbers from breaking layout */
            white-space: nowrap;
            text-overflow: ellipsis;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            box-sizing: border-box;
        }
        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 columns for a standard calculator layout */
            gap: 10px;
        }
        .btn {
            padding: 20px;
            font-size: 1.5em;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .btn:active {
            transform: scale(0.98);
        }
        .btn-number, .btn-decimal {
            background-color: #e0e0e0; /* Light gray for numbers */
            color: #333;
        }
        .btn-number:hover, .btn-decimal:hover {
            background-color: #d0d0d0;
        }
        .btn-operator {
            background-color: #f79231; /* Vibrant orange for operators */
            color: #fff;
        }
        .btn-operator:hover {
            background-color: #e68322;
        }
        .btn-equals {
            background-color: #4CAF50; /* Green for equals, signifying result */
            color: #fff;
            grid-column: span 2; /* Make equals button wider */
        }
        .btn-equals:hover {
            background-color: #45a049;
        }
        .btn-clear {
            background-color: #dc3545; /* Red for clear, indicating reset */
            color: #fff;
        }
        .btn-clear:hover {
            background-color: #c82333;
        }
        .btn-backspace {
            background-color: #6c757d; /* Muted gray for backspace */
            color: #fff;
        }
        .btn-backspace:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="display" id="display">0</div>
        <div class="buttons">
            <button class="btn btn-clear" id="clear">C</button>
            <button class="btn btn-backspace" id="backspace">‚Üê</button>
            <button class="btn btn-operator" id="divide">/</button>
            <button class="btn btn-operator" id="multiply">*</button>

            <button class="btn btn-number" id="number-7">7</button>
            <button class="btn btn-number" id="number-8">8</button>
            <button class="btn btn-number" id="number-9">9</button>
            <button class="btn btn-operator" id="subtract">-</button>

            <button class="btn btn-number" id="number-4">4</button>
            <button class="btn btn-number" id="number-5">5</button>
            <button class="btn btn-number" id="number-6">6</button>
            <button class="btn btn-operator" id="add">+</button>

            <button class="btn btn-number" id="number-1">1</button>
            <button class="btn btn-number" id="number-2">2</button>
            <button class="btn btn-number" id="number-3">3</button>
            <button class="btn btn-number" id="number-0">0</button>
            
            <button class="btn btn-decimal" id="decimal">.</button>
            <button class="btn btn-equals" id="equals">=</button>
        </div>
    </div>

    <script>
        const display = document.getElementById('display');
        let currentInput = '0';
        let previousInput = '';
        let operator = null;
        let waitingForSecondOperand = false; // Flag to indicate if the next number should start a new input

        /**
         * Updates the calculator display with the currentInput value.
         */
        function updateDisplay() {
            display.textContent = currentInput;
        }

        /**
         * Resets all calculator state variables to their initial values.
         */
        function clearCalculator() {
            currentInput = '0';
            previousInput = '';
            operator = null;
            waitingForSecondOperand = false;
            updateDisplay();
        }

        /**
         * Handles clicks on number buttons (0-9).
         * @param {string} number - The digit pressed.
         */
        function handleNumberClick(number) {
            if (currentInput === 'Error') {
                clearCalculator(); // Clear error state on new number input
            }
            if (waitingForSecondOperand) {
                currentInput = number;
                waitingForSecondOperand = false;
            } else {
                // Prevent leading zeros unless it's "0."
                currentInput = currentInput === '0' && number !== '.' ? number : currentInput + number;
            }
            updateDisplay();
        }

        /**
         * Handles click on the decimal point button.
         */
        function handleDecimalClick() {
            if (currentInput === 'Error') {
                clearCalculator();
            }
            // If waiting for second operand, start with "0."
            if (waitingForSecondOperand) {
                currentInput = '0.';
                waitingForSecondOperand = false;
            } else if (!currentInput.includes('.')) {
                // Add decimal only if it doesn't already exist
                currentInput += '.';
            }
            updateDisplay();
        }

        /**
         * Handles clicks on operator buttons (+, -, *, /).
         * @param {string} nextOperator - The operator symbol pressed.
         */
        function handleOperatorClick(nextOperator) {
            if (currentInput === 'Error') {
                return; // Do not allow operations if in an error state
            }

            const inputValue = parseFloat(currentInput);

            // Allow changing operator if one was already selected and no second operand entered yet
            if (operator && waitingForSecondOperand) {
                operator = nextOperator;
                return;
            }

            if (previousInput === '') {
                previousInput = inputValue;
            } else if (operator) {
                // Perform calculation with previous operator
                const result = performCalculation();
                if (result === 'Error') {
                    currentInput = 'Error';
                    previousInput = '';
                    operator = null;
                    updateDisplay();
                    return;
                }
                previousInput = result;
                currentInput = String(result); // Display intermediate result
            }

            operator = nextOperator;
            waitingForSecondOperand = true;
            updateDisplay(); // Update display to show current number, then next number will overwrite it
        }

        /**
         * Handles click on the equals button.
         */
        function handleEqualsClick() {
            if (operator === null || waitingForSecondOperand || currentInput === 'Error') {
                return; // Nothing to calculate, or already in error state, or no second operand entered
            }

            const result = performCalculation();
            if (result === 'Error') {
                currentInput = 'Error';
            } else {
                // Ensure result is a string for display and potential further operations
                currentInput = String(result);
            }
            previousInput = '';
            operator = null;
            waitingForSecondOperand = false;
            updateDisplay();
        }

        /**
         * Performs the arithmetic calculation based on the stored operator and operands.
         * @returns {number|string} The result of the calculation or 'Error' for invalid operations.
         */
        function performCalculation() {
            const prev = parseFloat(previousInput);
            const current = parseFloat(currentInput);

            // Basic validation for numbers
            if (isNaN(prev) || isNaN(current)) {
                return 'Error';
            }

            let result;
            switch (operator) {
                case '+':
                    result = prev + current;
                    break;
                case '-':
                    result = prev - current;
                    break;
                case '*':
                    result = prev * current;
                    break;
                case '/':
                    if (current === 0) {
                        return 'Error'; // Handle division by zero
                    }
                    result = prev / current;
                    break;
                default:
                    return current; // Should not happen if operator is set correctly
            }

            // Rounding to avoid floating point inaccuracies for display, e.g., 0.1 + 0.2 = 0.30000000000000004
            // A common approach is to round to a reasonable number of decimal places.
            return parseFloat(result.toFixed(10));
        }

        /**
         * Handles click on the backspace button.
         * Removes the last character from the current input.
         */
        function handleBackspace() {
            if (currentInput === 'Error') {
                clearCalculator(); // Clear error state on backspace
                return;
            }
            if (waitingForSecondOperand) {
                return; // Do not backspace if waiting for the second operand
            }
            currentInput = currentInput.slice(0, -1);
            if (currentInput === '' || currentInput === '-') { // If all digits removed or only minus sign left
                currentInput = '0'; // Reset to '0'
            }
            updateDisplay();
        }

        // Event Listeners for all calculator buttons
        document.getElementById('clear').addEventListener('click', clearCalculator);
        document.getElementById('backspace').addEventListener('click', handleBackspace);

        document.getElementById('add').addEventListener('click', () => handleOperatorClick('+'));
        document.getElementById('subtract').addEventListener('click', () => handleOperatorClick('-'));
        document.getElementById('multiply').addEventListener('click', () => handleOperatorClick('*'));
        document.getElementById('divide').addEventListener('click', () => handleOperatorClick('/'));

        document.getElementById('equals').addEventListener('click', handleEqualsClick);
        document.getElementById('decimal').addEventListener('click', handleDecimalClick);

        // Add event listeners for number buttons (0-9)
        for (let i = 0; i <= 9; i++) {
            document.getElementById(`number-${i}`).addEventListener('click', () => handleNumberClick(String(i)));
        }

        // Initialize the display when the page loads
        updateDisplay();
    </script>
</body>
</html>